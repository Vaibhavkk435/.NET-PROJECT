@{
    ViewData["Title"] = "Home";
}

<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        <div class="hero-content fade-in">
            <h1>Delicious Food Delivered Fast</h1>
            <p class="lead">Order from your favorite restaurants and get fresh, hot food delivered to your doorstep</p>
            <div class="search-container mt-4">
                <input type="text" class="search-input" placeholder="Search for restaurants, cuisines, or dishes..." id="searchInput">
            </div>
            <div class="mt-4">
                <a href="/Restaurants" class="btn btn-order btn-lg me-3">
                    <i class="fas fa-store me-2"></i>Browse Restaurants
                </a>
                <a href="/MenuItems" class="btn btn-outline-light btn-lg">
                    <i class="fas fa-hamburger me-2"></i>View Menu
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="features-section">
    <div class="container">
        <div class="row text-center mb-5">
            <div class="col-12">
                <h2 class="display-5 fw-bold mb-3">Why Choose FoodieExpress?</h2>
                <p class="lead text-muted">Experience the best food delivery service in town</p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-4">
                <div class="feature-box">
                    <div class="feature-icon">
                        <i class="fas fa-shipping-fast"></i>
                    </div>
                    <h4 class="fw-bold">Fast Delivery</h4>
                    <p class="text-muted">Get your food delivered in 30 minutes or less</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="feature-box">
                    <div class="feature-icon">
                        <i class="fas fa-utensils"></i>
                    </div>
                    <h4 class="fw-bold">Quality Food</h4>
                    <p class="text-muted">Fresh ingredients and expertly prepared meals</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="feature-box">
                    <div class="feature-icon">
                        <i class="fas fa-money-bill-wave"></i>
                    </div>
                    <h4 class="fw-bold">Best Prices</h4>
                    <p class="text-muted">Competitive prices with exclusive deals and offers</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Popular Restaurants Section -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-5">
                <h2 class="display-5 fw-bold">Popular Restaurants</h2>
                <p class="lead text-muted">Discover the most loved restaurants in your area</p>
            </div>
        </div>
        <div class="row" id="popular-restaurants">
            <!-- Restaurants will be loaded here -->
        </div>
        <div class="text-center mt-4">
            <a href="/Restaurants" class="btn btn-primary btn-lg">
                <i class="fas fa-eye me-2"></i>View All Restaurants
            </a>
        </div>
    </div>
</section>

<!-- Featured Items Section -->
<section class="py-5">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-5">
                <h2 class="display-5 fw-bold">Featured Menu Items</h2>
                <p class="lead text-muted">Try our chef's special recommendations</p>
            </div>
        </div>
        <div class="row" id="featured-items">
            <!-- Menu items will be loaded here -->
        </div>
        <div class="text-center mt-4">
            <a href="/MenuItems" class="btn btn-success btn-lg">
                <i class="fas fa-list me-2"></i>View Full Menu
            </a>
        </div>
    </div>
</section>

@section Scripts {
    <script>
        // Load popular restaurants
        loadPopularRestaurants();
        loadFeaturedItems();

        function loadPopularRestaurants() {
            fetch('/Home/GetPopularRestaurants')
                .then(response => response.json())
                .then(restaurants => {
                    const container = document.getElementById('popular-restaurants');
                    if (restaurants.length === 0) {
                        container.innerHTML = '<div class="col-12 text-center"><p class="text-muted">No restaurants available at the moment.</p></div>';
                        return;
                    }
                    
                    container.innerHTML = restaurants.map(restaurant => `
                        <div class="col-md-6 col-lg-4 mb-4">
                            <div class="card restaurant-card h-100">
                                <img src="${restaurant.imageUrl}" class="card-img-top" alt="${restaurant.name}" 
                                     onerror="this.src='https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=300&h=200&fit=crop';">
                                <div class="card-body d-flex flex-column">
                                    <h5 class="card-title fw-bold">${restaurant.name}</h5>
                                    <p class="card-text text-muted">
                                        <i class="fas fa-map-marker-alt me-1"></i>${restaurant.address}
                                    </p>
                                    <div class="rating mb-2">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star-half-alt"></i>
                                        <span class="ms-1 text-muted">4.5 (120 reviews)</span>
                                    </div>
                                    <div class="mt-auto">
                                        <a href="/Restaurants/Details/${restaurant.id}" class="btn btn-primary w-100">
                                            <i class="fas fa-eye me-2"></i>View Menu
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `).join('');
                })
                .catch(error => {
                    console.error('Error loading restaurants:', error);
                    const container = document.getElementById('popular-restaurants');
                    container.innerHTML = '<div class="col-12 text-center"><p class="text-muted">Error loading restaurants. Please try again later.</p></div>';
                });
        }

        function loadFeaturedItems() {
            fetch('/Home/GetFeaturedItems')
                .then(response => response.json())
                .then(items => {
                    const container = document.getElementById('featured-items');
                    if (items.length === 0) {
                        container.innerHTML = '<div class="col-12 text-center"><p class="text-muted">No menu items available at the moment.</p></div>';
                        return;
                    }
                    
                    container.innerHTML = items.map(item => `
                        <div class="col-md-6 col-lg-4 mb-4">
                            <div class="card menu-item-card h-100">
                                <div class="position-relative">
                                    <img src="${item.imageUrl}" class="card-img-top" alt="${item.name}"
                                         onerror="this.src='https://images.unsplash.com/photo-1567188040759-fb8a883dc6d8?w=300&h=200&fit=crop';">
                                    <div class="price-badge">₹${item.price}</div>
                                </div>
                                <div class="card-body d-flex flex-column">
                                    <h5 class="card-title fw-bold">${item.name}</h5>
                                    <p class="text-muted small">${item.restaurantName}</p>
                                    <div class="rating mb-2">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <span class="ms-1 text-muted">5.0</span>
                                    </div>
                                    <div class="mt-auto">
                                        <button class="btn btn-add-to-cart w-100" onclick="addToCart(${item.id}, '${item.name}', ${item.price})">
                                            <i class="fas fa-cart-plus me-2"></i>Add to Cart
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `).join('');
                })
                .catch(error => {
                    console.error('Error loading featured items:', error);
                    const container = document.getElementById('featured-items');
                    container.innerHTML = '<div class="col-12 text-center"><p class="text-muted">Error loading menu items. Please try again later.</p></div>';
                });
        }

        // Search functionality
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                const searchTerm = this.value.trim();
                if (searchTerm) {
                    window.location.href = `/Restaurants?search=${encodeURIComponent(searchTerm)}`;
                }
            }
        });
    </script>
}
